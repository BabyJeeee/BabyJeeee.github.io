<!DOCTYPE html>
<html>
<head>
  <title>Jeu de Recopie de Phrases</title>
  <style>
    body {
      font-family: 'Segoe UI', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      overflow: hidden;
    }
    .container {
      background: rgba(255,255,255,0.85);
      border-radius: 20px;
      box-shadow: 0 8px 32px 0 rgba(31,38,135,0.37);
      padding: 40px 50px 30px 50px;
      text-align: center;
      position: relative;
      z-index: 2;
    }
    h2 {
      color: #2d3a4b;
      margin-bottom: 20px;
      text-shadow: 1px 2px 8px #b3e0ff;
    }
    #phrase {
      font-size: 1.3em;
      margin-bottom: 18px;
      color: #3b5998;
      font-weight: bold;
      letter-spacing: 1px;
      background: #e3f2fd;
      border-radius: 10px;
      padding: 12px 18px;
      box-shadow: 0 2px 8px #b3e0ff44;
      transition: background 0.3s;
    }
    #input {
      font-size: 1.1em;
      padding: 10px 16px;
      border-radius: 8px;
      border: 2px solid #90caf9;
      outline: none;
      margin-bottom: 10px;
      width: 90%;
      max-width: 350px;
      transition: border 0.2s;
    }
    #input:focus {
      border: 2px solid #1976d2;
      background: #e3f2fd;
    }
    #start {
      background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
      color: white;
      font-size: 1.1em;
      border: none;
      border-radius: 8px;
      padding: 10px 28px;
      margin-top: 10px;
      margin-bottom: 10px;
      cursor: pointer;
      box-shadow: 0 4px 16px #185a9d33;
      transition: background 0.2s, transform 0.1s;
    }
    #start:hover {
      background: linear-gradient(90deg, #185a9d 0%, #43cea2 100%);
      transform: scale(1.05);
    }
    #result {
      margin-top: 18px;
      font-size: 1.2em;
      color: #388e3c;
      font-weight: bold;
      min-height: 32px;
      transition: color 0.3s;
    }
    #best {
      margin-top: 6px;
      font-size: 1em;
      color: #ff9800;
      font-weight: bold;
    }
    #timer {
      margin-top: 10px;
      font-size: 1.1em;
      color: #1976d2;
      font-weight: bold;
      min-height: 24px;
      letter-spacing: 1px;
      transition: color 0.3s;
    }
    #phrase.success {
      background: #c8e6c9 !important;
      color: #1b5e20 !important;
      box-shadow: 0 0 24px #81c784, 0 2px 8px #b3e0ff44;
      animation: pulse 0.7s;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.06); }
      100% { transform: scale(1); }
    }
    /* Confetti animation */
    .confetti {
      position: fixed;
      top: 0; left: 0; width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 10;
    }
  </style>
</head>
<body>
  <canvas class="confetti"></canvas>
  <div class="container">
    <h2>Recopie la phrase le plus vite possible !</h2>
    <div id="phrase"></div>
    <input type="text" id="input" autocomplete="off" />
    <div id="timer"></div>
    <button id="start">Commencer</button>
    <div id="result"></div>
    <div id="best"></div>
  </div>
  <script>
    const phrases = [
      "Bonjour, comment Ã§a va ?",
      "Le chat est sur le canapÃ©.",
      "Il fait beau aujourd'hui.",
      "J'aime programmer en JavaScript.",
      "Vite, tape cette phrase !",
      "Les licornes galopent sur les arcs-en-ciel.",
      "La programmation, c'est magique !",
      "Attrape la souris avant qu'elle ne s'Ã©chappe.",
      "Le soleil brille et les oiseaux chantent.",
      "Tape vite pour battre ton record !"
    ];
    let currentPhrase = "";
    let startTime = 0;
    let bestTime = localStorage.getItem('bestTime') ? parseFloat(localStorage.getItem('bestTime')) : null;
    let timerInterval = null;

    function nouvellePhrase() {
      currentPhrase = phrases[Math.floor(Math.random() * phrases.length)];
      document.getElementById('phrase').textContent = currentPhrase;
      document.getElementById('phrase').classList.remove('success');
      document.getElementById('input').value = "";
      document.getElementById('result').textContent = "";
      document.getElementById('input').disabled = false;
      document.getElementById('input').focus();
      document.getElementById('timer').textContent = "Temps : 0.00 s";
      startTime = Date.now();
      if (timerInterval) clearInterval(timerInterval);
      timerInterval = setInterval(updateTimer, 30);
    }

    function updateTimer() {
      if (startTime === 0) return;
      const now = Date.now();
      const elapsed = ((now - startTime) / 1000);
      document.getElementById('timer').textContent = "Temps : " + elapsed.toFixed(2) + " s";
    }

    function showBest() {
      if (bestTime !== null) {
        document.getElementById('best').textContent = "Meilleur temps : " + bestTime.toFixed(2) + " secondes";
      } else {
        document.getElementById('best').textContent = "";
      }
    }

    document.getElementById('start').onclick = nouvellePhrase;
    showBest();

    document.getElementById('input').addEventListener('input', function() {
      if (this.value === currentPhrase) {
        const temps = ((Date.now() - startTime) / 1000);
        document.getElementById('result').textContent = "Bravo ! Temps : " + temps.toFixed(2) + " secondes ðŸŽ‰";
        document.getElementById('result').style.color = "#388e3c";
        document.getElementById('input').disabled = true;
        document.getElementById('phrase').classList.add('success');
        clearInterval(timerInterval);
        document.getElementById('timer').textContent = "Temps final : " + temps.toFixed(2) + " s";
        if (bestTime === null || temps < bestTime) {
          bestTime = temps;
          localStorage.setItem('bestTime', bestTime);
          showBest();
        }
        lancerConfettis();
      }
    });

    // Confetti animation amÃ©liorÃ©e
    function lancerConfettis() {
      const canvas = document.querySelector('.confetti');
      const ctx = canvas.getContext('2d');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      let confettis = [];
      for (let i = 0; i < 180; i++) {
        confettis.push({
          x: Math.random() * canvas.width,
          y: Math.random() * -canvas.height,
          r: Math.random() * 8 + 4,
          d: Math.random() * 80 + 40,
          color: `hsl(${Math.random()*360},90%,60%)`,
          tilt: Math.random() * 10 - 5,
          tiltAngle: Math.random() * Math.PI
        });
      }
      let angle = 0;
      let frame = 0;
      function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        angle += 0.01;
        for (let i = 0; i < confettis.length; i++) {
          let c = confettis[i];
          c.y += (Math.cos(angle + c.d) + 3 + c.r/2) * 0.9;
          c.x += Math.sin(angle + c.d) * 2.5;
          c.tiltAngle += 0.1;
          ctx.save();
          ctx.translate(c.x, c.y);
          ctx.rotate(c.tiltAngle);
          ctx.beginPath();
          ctx.ellipse(0, 0, c.r, c.r/2, 0, 0, 2 * Math.PI);
          ctx.fillStyle = c.color;
          ctx.shadowColor = c.color;
          ctx.shadowBlur = 8;
          ctx.fill();
          ctx.restore();
        }
        frame++;
        if (frame < 100) {
          requestAnimationFrame(draw);
        } else {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }
      }
      draw();
    }

    window.addEventListener('resize', () => {
      const canvas = document.querySelector('.confetti');
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    });
  </script>
</body>
</html>